{"ast":null,"code":"import _slicedToArray from\"/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{NavLink}from'react-router-dom';import{getProductById,updateProductAdmin}from'../redux/actions/productAction';import{PRODUCT_UPDATE_RESET}from'../redux/constants/constants';import{history}from'../utils/history/history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductEditScreen(_ref){var _match$params;var match=_ref.match;var productId=match===null||match===void 0?void 0:(_match$params=match.params)===null||_match$params===void 0?void 0:_match$params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),countInStock=_useState10[0],setCountInStock=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),brand=_useState12[0],setBrand=_useState12[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state===null||state===void 0?void 0:state.productReducer;}),loading=_useSelector.loading,product=_useSelector.product;//const  { loading: loadingUpdate, success: successUpdate } = useSelector((state) => state?.userUpdateAdmin)\nvar productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,successUpdate=productUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:PRODUCT_UPDATE_RESET});history.push('/admin/products');}else{if(!product){dispatch(getProductById(productId));}else{setName(product===null||product===void 0?void 0:product.name);setCategory(product===null||product===void 0?void 0:product.category);setDescription(product===null||product===void 0?void 0:product.description);setPrice(product===null||product===void 0?void 0:product.price);setCountInStock(product===null||product===void 0?void 0:product.countInStock);setBrand(product===null||product===void 0?void 0:product.brand);}}},[productId,product,dispatch,successUpdate]);var submitHandler=function submitHandler(e){e.preventDefault();var updateProduct={_id:productId,name:name,category:category,description:description,price:price,countInStock:countInStock,brand:brand};console.log('updateProduct',updateProduct);dispatch(updateProductAdmin(updateProduct));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavLink,{to:\"/admin/products\",className:\"btn btn-light my-3\",children:\"Go Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Product\"}),loading?/*#__PURE__*/_jsx(\"h1\",{children:\"Loading ...\"}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"name\",onChange:function onChange(e){return setName(e.target.value);},value:name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"category\",onChange:function onChange(e){return setCategory(e.target.value);},value:category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"description\",onChange:function onChange(e){return setDescription(e.target.value);},value:description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"brand\",onChange:function onChange(e){return setBrand(e.target.value);},value:brand})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",name:\"price\",onChange:function onChange(e){return setPrice(e.target.value);},value:price})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Stock\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",name:\"countInStock\",onChange:function onChange(e){return setCountInStock(e.target.value);},value:countInStock})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update\"})]})]})]});}","map":{"version":3,"sources":["/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/screens/ProductEditScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","NavLink","getProductById","updateProductAdmin","PRODUCT_UPDATE_RESET","history","ProductEditScreen","match","productId","params","id","name","setName","category","setCategory","description","setDescription","price","setPrice","countInStock","setCountInStock","brand","setBrand","dispatch","state","productReducer","loading","product","productUpdate","loadingUpdate","successUpdate","success","type","push","submitHandler","e","preventDefault","updateProduct","_id","console","log","target","value"],"mappings":"+KAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,cAAT,CAAyBC,kBAAzB,KAAmD,gCAAnD,CACA,OAASC,oBAAT,KAAqC,8BAArC,CACA,OAASC,OAAT,KAAwB,0BAAxB,C,wFACA,cAAe,SAASC,CAAAA,iBAAT,MAAsC,sBAATC,CAAAA,KAAS,MAATA,KAAS,CACjD,GAAMC,CAAAA,SAAS,CAAGD,KAAH,SAAGA,KAAH,gCAAGA,KAAK,CAAEE,MAAV,wCAAG,cAAeC,EAAjC,CAEA,cAAwBZ,QAAQ,CAAC,EAAD,CAAhC,wCAAOa,IAAP,eAAaC,OAAb,eACA,eAAgCd,QAAQ,CAAC,EAAD,CAAxC,yCAAOe,QAAP,eAAiBC,WAAjB,eACA,eAAsChB,QAAQ,CAAC,EAAD,CAA9C,yCAAOiB,WAAP,eAAoBC,cAApB,eACA,eAA0BlB,QAAQ,CAAC,EAAD,CAAlC,yCAAOmB,KAAP,eAAcC,QAAd,eACA,eAAwCpB,QAAQ,CAAC,EAAD,CAAhD,0CAAOqB,YAAP,gBAAqBC,eAArB,gBACA,gBAA0BtB,QAAQ,CAAC,EAAD,CAAlC,2CAAOuB,KAAP,gBAAcC,QAAd,gBACA,GAAMC,CAAAA,QAAQ,CAAGxB,WAAW,EAA5B,CAEA,iBAA8BC,WAAW,CAAC,SAACwB,KAAD,QAAWA,CAAAA,KAAX,SAAWA,KAAX,iBAAWA,KAAK,CAAEC,cAAlB,EAAD,CAAzC,CAASC,OAAT,cAASA,OAAT,CAAkBC,OAAlB,cAAkBA,OAAlB,CACA;AACA,GAAMC,CAAAA,aAAa,CAAG5B,WAAW,CAAC,SAACwB,KAAD,QAAWA,CAAAA,KAAK,CAACI,aAAjB,EAAD,CAAjC,CACA,GAAiBC,CAAAA,aAAjB,CAA6DD,aAA7D,CAAQF,OAAR,CAA0CI,aAA1C,CAA6DF,aAA7D,CAAiCG,OAAjC,CAEAlC,SAAS,CAAC,UAAM,CACZ,GAAIiC,aAAJ,CAAmB,CACfP,QAAQ,CAAC,CAAES,IAAI,CAAE5B,oBAAR,CAAD,CAAR,CACAC,OAAO,CAAC4B,IAAR,CAAa,iBAAb,EACD,CAHH,IAGS,CACN,GAAI,CAACN,OAAL,CAAc,CACVJ,QAAQ,CAACrB,cAAc,CAACM,SAAD,CAAf,CAAR,CACH,CAFD,IAEO,CACHI,OAAO,CAACe,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAEhB,IAAV,CAAP,CACAG,WAAW,CAACa,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAEd,QAAV,CAAX,CACAG,cAAc,CAACW,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAEZ,WAAV,CAAd,CACAG,QAAQ,CAACS,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAEV,KAAV,CAAR,CACAG,eAAe,CAACO,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAER,YAAV,CAAf,CACAG,QAAQ,CAACK,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAEN,KAAV,CAAR,CACH,CACH,CAAC,CAfG,CAeF,CAACb,SAAD,CAAYmB,OAAZ,CAAqBJ,QAArB,CAAgCO,aAAhC,CAfE,CAAT,CAkBA,GAAMI,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CACzBA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,aAAa,CAAG,CAACC,GAAG,CAAE9B,SAAN,CAAkBG,IAAI,CAAJA,IAAlB,CAAwBE,QAAQ,CAARA,QAAxB,CAAkCE,WAAW,CAAXA,WAAlC,CAA+CE,KAAK,CAALA,KAA/C,CAAsDE,YAAY,CAAZA,YAAtD,CAAoEE,KAAK,CAALA,KAApE,CAAtB,CACAkB,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BH,aAA7B,EACAd,QAAQ,CAACpB,kBAAkB,CAACkC,aAAD,CAAnB,CAAR,CACD,CALH,CAOF,mBAAO,oCACT,KAAC,OAAD,EAAS,EAAE,CAAC,iBAAZ,CAA8B,SAAS,CAAC,oBAAxC,qBADS,cAIH,aAAK,SAAS,CAAG,WAAjB,wBACE,oCADF,CAEGX,OAAO,cACP,mCADO,cAGJ,cAAM,QAAQ,CAAIQ,aAAlB,wBACA,aAAK,SAAS,CAAC,MAAf,wBACA,cAAO,SAAS,CAAC,YAAjB,0BADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,IAAI,CAAG,MAAnD,CAA0D,QAAQ,CAAE,kBAACC,CAAD,QAAOvB,CAAAA,OAAO,CAACuB,CAAC,CAACM,MAAF,CAASC,KAAV,CAAd,EAApE,CACG,KAAK,CAAI/B,IADZ,EAFA,GADA,cAOA,aAAK,SAAS,CAAC,MAAf,wBACA,cAAO,SAAS,CAAC,YAAjB,sBADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,IAAI,CAAG,UAAnD,CAA8D,QAAQ,CAAE,kBAACwB,CAAD,QAAOrB,CAAAA,WAAW,CAACqB,CAAC,CAACM,MAAF,CAASC,KAAV,CAAlB,EAAxE,CAA6G,KAAK,CAAI7B,QAAtH,EAFA,GAPA,cAWA,aAAK,SAAS,CAAC,MAAf,wBACA,cAAO,SAAS,CAAC,YAAjB,yBADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,IAAI,CAAG,aAAnD,CAAiE,QAAQ,CAAE,kBAACsB,CAAD,QAAOnB,CAAAA,cAAc,CAACmB,CAAC,CAACM,MAAF,CAASC,KAAV,CAArB,EAA3E,CAAmH,KAAK,CAAI3B,WAA5H,EAFA,GAXA,cAeA,aAAK,SAAS,CAAC,MAAf,wBACA,cAAO,SAAS,CAAC,YAAjB,mBADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,IAAI,CAAG,OAAnD,CAA2D,QAAQ,CAAE,kBAACoB,CAAD,QAAOb,CAAAA,QAAQ,CAACa,CAAC,CAACM,MAAF,CAASC,KAAV,CAAf,EAArE,CAAuG,KAAK,CAAIrB,KAAhH,EAFA,GAfA,cAmBA,aAAK,SAAS,CAAC,MAAf,wBACA,cAAO,SAAS,CAAC,YAAjB,mBADA,cAEA,cAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAC,cAA/B,CAA8C,IAAI,CAAG,OAArD,CAA6D,QAAQ,CAAE,kBAACc,CAAD,QAAOjB,CAAAA,QAAQ,CAACiB,CAAC,CAACM,MAAF,CAASC,KAAV,CAAf,EAAvE,CAAyG,KAAK,CAAIzB,KAAlH,EAFA,GAnBA,cAuBA,aAAK,SAAS,CAAC,MAAf,wBACA,cAAO,SAAS,CAAC,YAAjB,mBADA,cAEA,cAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAC,cAA/B,CAA8C,IAAI,CAAG,cAArD,CAAoE,QAAQ,CAAE,kBAACkB,CAAD,QAAOf,CAAAA,eAAe,CAACe,CAAC,CAACM,MAAF,CAASC,KAAV,CAAtB,EAA9E,CAAuH,KAAK,CAAIvB,YAAhI,EAFA,GAvBA,cA4BA,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,oBA5BA,GALN,GAJG,GAAP,CA2CD","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { getProductById, updateProductAdmin } from '../redux/actions/productAction';\nimport { PRODUCT_UPDATE_RESET } from '../redux/constants/constants';\nimport { history } from '../utils/history/history';\nexport default function ProductEditScreen({ match }) {\n    const productId = match?.params?.id\n\n    const [name, setName] = useState('')\n    const [category, setCategory] = useState('')\n    const [description, setDescription] = useState('')\n    const [price, setPrice] = useState('')\n    const [countInStock, setCountInStock] = useState('')\n    const [brand, setBrand] = useState('')\n    const dispatch = useDispatch()\n\n    const  { loading, product } = useSelector((state) => state?.productReducer)\n    //const  { loading: loadingUpdate, success: successUpdate } = useSelector((state) => state?.userUpdateAdmin)\n    const productUpdate = useSelector((state) => state.productUpdate)\n    const { loading: loadingUpdate,  success: successUpdate, } = productUpdate\n\n    useEffect(() => {\n        if (successUpdate) {\n            dispatch({ type: PRODUCT_UPDATE_RESET })\n            history.push('/admin/products')\n          } else {\n           if( !product) {\n               dispatch(getProductById(productId))\n           } else {\n               setName(product?.name)\n               setCategory(product?.category)\n               setDescription(product?.description)\n               setPrice(product?.price)\n               setCountInStock(product?.countInStock)\n               setBrand(product?.brand)\n           }\n        }},[productId, product, dispatch , successUpdate]);\n  \n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        const updateProduct = {_id: productId,  name, category, description, price, countInStock, brand}\n        console.log('updateProduct', updateProduct);\n        dispatch(updateProductAdmin(updateProduct))\n      }\n\n  return <div>\n<NavLink to='/admin/products' className='btn btn-light my-3'>\n        Go Back\n      </NavLink>\n      <div className = \"container\">\n        <h1>Edit Product</h1>\n        {loading ? (\n         <h1>Loading ...</h1>\n        ) : (\n            <form onSubmit = {submitHandler}>\n            <div className=\"mb-3\">\n            <label className=\"form-label\">Product Name</label>\n            <input type=\"text\" className=\"form-control\" name = \"name\" onChange={(e) => setName(e.target.value)\n            }  value = {name}/>\n            </div>\n            \n            <div className=\"mb-3\">\n            <label className=\"form-label\">Category</label>\n            <input type=\"text\" className=\"form-control\" name = \"category\" onChange={(e) => setCategory(e.target.value)}  value = {category}/>\n            </div>\n            <div className=\"mb-3\">\n            <label className=\"form-label\">Description</label>\n            <input type=\"text\" className=\"form-control\" name = \"description\" onChange={(e) => setDescription(e.target.value)}  value = {description}/>\n            </div>\n            <div className=\"mb-3\">\n            <label className=\"form-label\">Brand</label>\n            <input type=\"text\" className=\"form-control\" name = \"brand\" onChange={(e) => setBrand(e.target.value)}  value = {brand}/>\n            </div>\n            <div className=\"mb-3\">\n            <label className=\"form-label\">Price</label>\n            <input type=\"number\" className=\"form-control\" name = \"price\" onChange={(e) => setPrice(e.target.value)}  value = {price}/>\n            </div>\n            <div className=\"mb-3\">\n            <label className=\"form-label\">Stock</label>\n            <input type=\"number\" className=\"form-control\" name = \"countInStock\" onChange={(e) => setCountInStock(e.target.value)}  value = {countInStock}/>\n            </div>\n\n            <button type=\"submit\" className=\"btn btn-primary\">Update</button>\n            </form>\n        )}\n      </div>\n\n  </div>;\n}\n"]},"metadata":{},"sourceType":"module"}