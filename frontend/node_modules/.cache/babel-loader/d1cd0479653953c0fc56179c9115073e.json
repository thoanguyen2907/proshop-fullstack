{"ast":null,"code":"import _asyncToGenerator from\"/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{PRODUCT_CREATE_FAIL,PRODUCT_CREATE_REQUEST,PRODUCT_CREATE_REVIEW_FAIL,PRODUCT_CREATE_REVIEW_REQUEST,PRODUCT_CREATE_REVIEW_SUCCESS,PRODUCT_CREATE_SUCCESS,PRODUCT_DELETE_FAIL,PRODUCT_DELETE_REQUEST,PRODUCT_DELETE_SUCCESS,PRODUCT_DETAIL_FAIL,PRODUCT_DETAIL_REQUEST,PRODUCT_DETAIL_SUCCESS,PRODUCT_LIST_FAIL,PRODUCT_LIST_REQUEST,PRODUCT_LIST_SUCCESS,PRODUCT_UPDATE_FAIL,PRODUCT_UPDATE_REQUEST,PRODUCT_UPDATE_SUCCESS}from\"../constants/constants\";import axios from'axios';import{history}from\"../../utils/history/history\";export var listProducts=function listProducts(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:PRODUCT_LIST_REQUEST});_context.next=4;return axios.get('http://localhost:5000/api/products/');case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch({type:PRODUCT_LIST_SUCCESS,payload:data});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);dispatch({type:PRODUCT_LIST_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getProductById=function getProductById(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:PRODUCT_DETAIL_REQUEST});_context2.next=4;return axios.get(\"http://localhost:5000/api/products/\".concat(id));case 4:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;dispatch({type:PRODUCT_DETAIL_SUCCESS,payload:data});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);dispatch({type:PRODUCT_DETAIL_FAIL,payload:_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateProductAdmin=function updateProductAdmin(product){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var userInfo,config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:PRODUCT_UPDATE_REQUEST});userInfo=JSON.parse(localStorage.getItem('userInfo'));config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(userInfo.token)}};_context3.next=6;return axios.put(\"http://localhost:5000/api/products/admin/edit/product/\".concat(product._id),product,config);case 6:_yield$axios$put=_context3.sent;data=_yield$axios$put.data;dispatch({type:PRODUCT_UPDATE_SUCCESS,payload:data});dispatch({type:PRODUCT_DETAIL_SUCCESS,payload:data});_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 15:dispatch({type:PRODUCT_UPDATE_FAIL});case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,12]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var deleteProduct=function deleteProduct(id){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var userInfo,config,_yield$axios$delete,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:PRODUCT_DELETE_REQUEST});userInfo=JSON.parse(localStorage.getItem('userInfo'));config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(userInfo.token)}};_context4.next=6;return axios.delete(\"http://localhost:5000/api/products/\".concat(id),config);case 6:_yield$axios$delete=_context4.sent;data=_yield$axios$delete.data;dispatch({type:PRODUCT_DELETE_SUCCESS});dispatch(listProducts());_context4.next=16;break;case 12:_context4.prev=12;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);dispatch({type:PRODUCT_DELETE_FAIL});case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[0,12]]);}));return function(_x5,_x6){return _ref4.apply(this,arguments);};}();};export var createProduct=function createProduct(product){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _getState,userInfo,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;dispatch({type:PRODUCT_CREATE_REQUEST});_getState=getState(),userInfo=_getState.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context5.next=6;return axios.post(\"http://localhost:5000/api/products\",product,config);case 6:_yield$axios$post=_context5.sent;data=_yield$axios$post.data;console.log(data);dispatch({type:PRODUCT_CREATE_SUCCESS,payload:data});history.push(\"/admin/products\");_context5.next=16;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](0);dispatch({type:PRODUCT_CREATE_FAIL});case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[0,13]]);}));return function(_x7,_x8){return _ref5.apply(this,arguments);};}();};export var createProductReview=function createProductReview(productId,review){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var _getState2,userInfo,config,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;dispatch({type:PRODUCT_CREATE_REVIEW_REQUEST});_getState2=getState(),userInfo=_getState2.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context6.next=6;return axios.post(\"http://localhost:5000/api/products/\".concat(productId,\"/reviews\"),review,config);case 6:_yield$axios$post2=_context6.sent;data=_yield$axios$post2.data;console.log(data);dispatch({type:PRODUCT_CREATE_REVIEW_SUCCESS});dispatch(getProductById(productId));_context6.next=16;break;case 13:_context6.prev=13;_context6.t0=_context6[\"catch\"](0);dispatch({type:PRODUCT_CREATE_REVIEW_FAIL});case 16:case\"end\":return _context6.stop();}}},_callee6,null,[[0,13]]);}));return function(_x9,_x10){return _ref6.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/redux/actions/productAction.js"],"names":["PRODUCT_CREATE_FAIL","PRODUCT_CREATE_REQUEST","PRODUCT_CREATE_REVIEW_FAIL","PRODUCT_CREATE_REVIEW_REQUEST","PRODUCT_CREATE_REVIEW_SUCCESS","PRODUCT_CREATE_SUCCESS","PRODUCT_DELETE_FAIL","PRODUCT_DELETE_REQUEST","PRODUCT_DELETE_SUCCESS","PRODUCT_DETAIL_FAIL","PRODUCT_DETAIL_REQUEST","PRODUCT_DETAIL_SUCCESS","PRODUCT_LIST_FAIL","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","PRODUCT_UPDATE_FAIL","PRODUCT_UPDATE_REQUEST","PRODUCT_UPDATE_SUCCESS","axios","history","listProducts","dispatch","type","get","data","payload","response","message","getProductById","id","updateProductAdmin","product","getState","userInfo","JSON","parse","localStorage","getItem","config","headers","Authorization","token","put","_id","console","log","deleteProduct","delete","createProduct","userLogin","post","push","createProductReview","productId","review"],"mappings":"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","sourcesContent":["import { PRODUCT_CREATE_FAIL, PRODUCT_CREATE_REQUEST, PRODUCT_CREATE_REVIEW_FAIL, PRODUCT_CREATE_REVIEW_REQUEST, PRODUCT_CREATE_REVIEW_SUCCESS, PRODUCT_CREATE_SUCCESS, PRODUCT_DELETE_FAIL, PRODUCT_DELETE_REQUEST, PRODUCT_DELETE_SUCCESS, PRODUCT_DETAIL_FAIL, PRODUCT_DETAIL_REQUEST, PRODUCT_DETAIL_SUCCESS, PRODUCT_LIST_FAIL, PRODUCT_LIST_REQUEST, PRODUCT_LIST_SUCCESS, PRODUCT_UPDATE_FAIL, PRODUCT_UPDATE_REQUEST, PRODUCT_UPDATE_SUCCESS } from \"../constants/constants\"\nimport  axios from 'axios' \nimport { history } from \"../../utils/history/history\"\n\n\nexport const listProducts =  () => {\n    return async (dispatch) => {\n    try {\n        dispatch({type: PRODUCT_LIST_REQUEST})\n\n        const {data} = await axios.get('http://localhost:5000/api/products/')\n        dispatch({\n            type: PRODUCT_LIST_SUCCESS,\n            payload: data\n        }) \n\n    } catch(error) {\n        dispatch({\n            type: PRODUCT_LIST_FAIL,\n            payload: error.response && error.response.data.message ? error.response.data.message : error.message\n        })\n    }\n    }\n}\n\nexport const getProductById =  (id) => {\n    return async (dispatch) => {\n    try {\n        dispatch({type: PRODUCT_DETAIL_REQUEST})\n\n        const {data} = await axios.get(`http://localhost:5000/api/products/${id}`)\n       \n        dispatch({\n            type: PRODUCT_DETAIL_SUCCESS,\n            payload: data\n        }) \n\n    } catch(error) {\n        dispatch({\n            type: PRODUCT_DETAIL_FAIL,\n            payload: error.response && error.response.data.message ? error.response.data.message : error.message\n        })\n    }\n    }\n}\nexport const updateProductAdmin = (product) => async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: PRODUCT_UPDATE_REQUEST,\n      })\n  \n      const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    \n      const config = {\n          headers: {\n              'Content-Type' : 'application/json',\n              Authorization: `Bearer ${userInfo.token}`\n          }\n      }\n      \n      const { data } = await axios.put(\n        `http://localhost:5000/api/products/admin/edit/product/${product._id}`, product, config )\n  \n      dispatch({\n        type: PRODUCT_UPDATE_SUCCESS,\n        payload: data,\n      })\n      dispatch({ type: PRODUCT_DETAIL_SUCCESS, payload: data })\n    } catch (error) {\n        console.log(error);\n      }\n      dispatch({\n        type: PRODUCT_UPDATE_FAIL\n\n      })\n    }\n\n    export const deleteProduct  =  (id) => {\n        return async (dispatch, getState) => {\n         \n        try {\n            dispatch({type: PRODUCT_DELETE_REQUEST})\n    \n            const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n        \n            const config = {\n                headers: {\n                    'Content-Type' : 'application/json',\n                    Authorization: `Bearer ${userInfo.token}`\n                }\n            }\n            const {data} = await axios.delete(`http://localhost:5000/api/products/${id}`, config)\n        \n            dispatch({\n                type: PRODUCT_DELETE_SUCCESS })\n                dispatch(listProducts())\n     } catch(error) {\n           console.log(error);\n           dispatch({\n               type: PRODUCT_DELETE_FAIL\n           })\n        }\n        }\n    }\n    export const createProduct = (product) => async (dispatch, getState) => {\n        try {\n          dispatch({\n            type: PRODUCT_CREATE_REQUEST,\n          })\n      \n          const {\n            userLogin: { userInfo },\n          } = getState()\n      \n          const config = {\n            headers: {\n              Authorization: `Bearer ${userInfo.token}`,\n            },\n          }\n      \n          const { data } = await axios.post(`http://localhost:5000/api/products`, product, config)\n          console.log(data);\n          dispatch({\n            type: PRODUCT_CREATE_SUCCESS,\n            payload: data,\n          })\n          history.push(\"/admin/products\")\n        } catch (error) {\n          \n          dispatch({\n            type: PRODUCT_CREATE_FAIL\n          })\n       \n        } }\n\n  export const createProductReview = (productId, review) => async (dispatch, getState) => {\n          try {\n            dispatch({\n              type: PRODUCT_CREATE_REVIEW_REQUEST,\n            })\n        \n            const {\n              userLogin: { userInfo },\n            } = getState()\n        \n            const config = {\n              headers: {\n                Authorization: `Bearer ${userInfo.token}`,\n              },\n            }\n        \n            const { data } = await axios.post(`http://localhost:5000/api/products/${productId}/reviews`, review, config)\n            console.log(data);\n            dispatch({\n              type: PRODUCT_CREATE_REVIEW_SUCCESS\n            })\n            dispatch(getProductById(productId))\n          } catch (error) {\n            \n            dispatch({\n              type: PRODUCT_CREATE_REVIEW_FAIL\n            })\n         \n          } \n\n        }"]},"metadata":{},"sourceType":"module"}