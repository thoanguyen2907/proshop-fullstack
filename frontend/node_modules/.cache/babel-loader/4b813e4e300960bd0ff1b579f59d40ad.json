{"ast":null,"code":"import _toConsumableArray from\"/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{width}from'dom-helpers';import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{NavLink}from'react-router-dom';import{addToCart,removeFromCart}from'../redux/actions/cartAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.cart;}),cartItems=_useSelector.cartItems;var productId=match.params.id;var qty=location.search?Number(location.search.split('=')[1]):1;useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){history.push('/login?redirect=shipping');};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8\",children:cartItems.length===0?/*#__PURE__*/_jsxs(\"h3\",{children:[\"Your cart is empty \",/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:\"Go back\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,style:{width:'100px'},className:\"fluid\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(NavLink,{to:\"/product/\".concat(item.product),className:\"text-dark text-decoration-none\",children:[\" \",/*#__PURE__*/_jsx(\"p\",{children:item.name})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:item.price}),/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(\"form\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:/*#__PURE__*/_jsx(\"select\",{className:\"form-select\",children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsxs(\"option\",{value:x+1,children:[\" \",x+1]},x+1);})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light\",onClick:function onClick(){removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group list-group-flush\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.quantity;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.quantity*item.price;},0)]}),/*#__PURE__*/_jsx(NavLink,{className:\"list-group-item\",to:\"/shipping\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-dark\",onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})]})});}","map":{"version":3,"sources":["/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/screens/CartScreen.js"],"names":["width","React","useEffect","useDispatch","useSelector","NavLink","addToCart","removeFromCart","CartScreen","match","location","history","dispatch","state","cart","cartItems","productId","params","id","qty","search","Number","split","removeFromCartHandler","checkoutHandler","push","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","quantity"],"mappings":"uLAAA,OAASA,KAAT,KAAsB,aAAtB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,6BAA1C,C,wFAEA,cAAe,SAASC,CAAAA,UAAT,MAAgD,IAA3BC,CAAAA,KAA2B,MAA3BA,KAA2B,CAApBC,QAAoB,MAApBA,QAAoB,CAAVC,OAAU,MAAVA,OAAU,CAC3D,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACA,iBAAoBC,WAAW,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACC,IAAV,EAAN,CAA/B,CAAOC,SAAP,cAAOA,SAAP,CACA,GAAMC,CAAAA,SAAS,CAAGP,KAAK,CAACQ,MAAN,CAAaC,EAA/B,CAEA,GAAMC,CAAAA,GAAG,CAAGT,QAAQ,CAACU,MAAT,CAAiBC,MAAM,CAACX,QAAQ,CAACU,MAAT,CAAgBE,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,CAAvB,CAAyD,CAArE,CAEApB,SAAS,CAAC,UAAM,CACZ,GAAGc,SAAH,CAAc,CACVJ,QAAQ,CAACN,SAAS,CAACU,SAAD,CAAYG,GAAZ,CAAV,CAAR,CACH,CACJ,CAJQ,CAIN,CAACP,QAAD,CAAWI,SAAX,CAAsBG,GAAtB,CAJM,CAAT,CAMA,GAAMI,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACL,EAAD,CAAQ,CAElCN,QAAQ,CAACL,cAAc,CAACW,EAAD,CAAf,CAAR,CACH,CAHD,CAIA,GAAMM,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1Bb,OAAO,CAACc,IAAR,CAAa,0BAAb,EACH,CAFD,CAGA,mBACI,YAAK,SAAS,CAAC,WAAf,uBACE,aAAK,SAAS,CAAC,KAAf,wBACA,qCADA,cAEI,YAAK,SAAS,CAAC,OAAf,UAEGV,SAAS,CAACW,MAAV,GAAsB,CAAtB,cAA0B,yDAAuB,KAAC,OAAD,EAAS,EAAE,CAAG,GAAd,qBAAvB,GAA1B,cACG,WAAI,SAAS,CAAC,6BAAd,UACKX,SAAS,CAACY,GAAV,CAAc,SAAAC,IAAI,CAAI,CAEnB,mBAAS,WAAuB,SAAS,CAAC,iBAAjC,uBACL,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,OAAf,uBACI,YAAK,GAAG,CAAEA,IAAI,CAACC,KAAf,CAAsB,GAAG,CAAED,IAAI,CAACE,IAAhC,CAAuC,KAAK,CAAI,CAAC9B,KAAK,CAAE,OAAR,CAAhD,CAAkE,SAAS,CAAC,OAA5E,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,OAAf,uBACI,MAAC,OAAD,EAAS,EAAE,oBAAgB4B,IAAI,CAACG,OAArB,CAAX,CAA2C,SAAS,CAAC,gCAArD,4BAAuF,mBAAIH,IAAI,CAACE,IAAT,EAAvF,GADJ,EAJJ,cAOI,YAAK,SAAS,CAAC,OAAf,UAAwBF,IAAI,CAACI,KAA7B,EAPJ,cAQI,YAAK,SAAS,CAAC,OAAf,uBACA,aAAM,KAAK,CAAIJ,IAAI,CAACT,GAApB,CAAyB,QAAQ,CAAE,kBAACc,CAAD,QAAOrB,CAAAA,QAAQ,CAACN,SAAS,CAACsB,IAAI,CAACG,OAAN,CAAcV,MAAM,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAApB,CAAV,CAAf,EAAnC,uBACN,eAAQ,SAAS,CAAC,aAAlB,UACT,mBAAIC,KAAK,CAACR,IAAI,CAACS,YAAN,CAAL,CAAyBC,IAAzB,EAAJ,EAAqCX,GAArC,CAAyC,SAAAY,CAAC,qBACvC,gBAAsB,KAAK,CAAIA,CAAC,CAAG,CAAnC,eAAwCA,CAAC,CAAG,CAA5C,GAAeA,CAAC,CAAG,CAAnB,CADuC,EAA1C,CADS,EADM,EADA,EARJ,cAkBI,YAAK,SAAS,CAAC,OAAf,uBAClB,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAI,kBAAM,CAC/ChB,qBAAqB,CAACK,IAAI,CAACG,OAAN,CAArB,CACH,CAFD,uBAEG,UAAG,SAAS,CAAC,cAAb,EAFH,EADkB,EAlBJ,GADK,EAASH,IAAI,CAACG,OAAd,CAAT,CA0BH,CA5BA,CADL,EAHN,EAFJ,cAwCI,YAAK,SAAS,CAAC,OAAf,uBACA,YAAI,SAAS,CAAC,6BAAd,wBACZ,YAAI,SAAS,CAAC,iBAAd,wBACI,mCAAehB,SAAS,CAACyB,MAAV,CAAiB,SAACC,GAAD,CAAMb,IAAN,QAAea,CAAAA,GAAG,CAAGb,IAAI,CAACc,QAA1B,EAAjB,CAAqD,CAArD,CAAf,aADJ,KAEM3B,SAAS,CAACyB,MAAV,CAAiB,SAACC,GAAD,CAAMb,IAAN,QAAea,CAAAA,GAAG,CAAGb,IAAI,CAACc,QAAL,CAAgBd,IAAI,CAACI,KAA1C,EAAjB,CAAkE,CAAlE,CAFN,GADY,cAKb,KAAC,OAAD,EAAU,SAAS,CAAC,iBAApB,CAAsC,EAAE,CAAG,WAA3C,uBACO,eAAQ,IAAI,CAAG,QAAf,CAAwB,SAAS,CAAC,UAAlC,CAA6C,OAAO,CAAIR,eAAxD,iCADP,EALa,GADA,EAxCJ,GADF,EADJ,CA0DH","sourcesContent":["import { width } from 'dom-helpers'\nimport React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { NavLink } from 'react-router-dom'\nimport { addToCart, removeFromCart } from '../redux/actions/cartAction'\n\nexport default function CartScreen({match, location, history}) {\n    const dispatch = useDispatch()\n    const {cartItems} = useSelector(state => state.cart)\n    const productId = match.params.id\n\n    const qty = location.search? Number(location.search.split('=')[1]) : 1\n    \n    useEffect(() => {\n        if(productId) {\n            dispatch(addToCart(productId, qty))\n        }\n    }, [dispatch, productId, qty])\n\n    const removeFromCartHandler = (id) => {\n       \n        dispatch(removeFromCart(id))\n    }\n    const checkoutHandler = () => {\n        history.push('/login?redirect=shipping')\n    }\n    return ( \n        <div className='container'>\n          <div className=\"row\">\n          <h1>Shopping Cart</h1>\n              <div className=\"col-8\">\n              \n                {cartItems.length  === 0 ? <h3>Your cart is empty <NavLink to = \"/\">Go back</NavLink></h3> : (\n                    <ul className=\"list-group list-group-flush\">\n                        {cartItems.map(item => {\n                   \n                            return   <li key={item.product} className=\"list-group-item\">\n                                <div className=\"row\">\n                                    <div className=\"col-2\">\n                                        <img src={item.image} alt={item.name}  style = {{width: '100px'}} className=\"fluid\" />\n                                    </div>\n                                    <div className=\"col-4\">\n                                        <NavLink to = {`/product/${item.product}`} className=\"text-dark text-decoration-none\"> <p>{item.name}</p></NavLink>\n                                    </div>\n                                    <div className=\"col-2\">{item.price}</div>\n                                    <div className=\"col-2\">\n                                    <form value = {item.qty} onChange={(e) => dispatch(addToCart(item.product,Number(e.target.value)))}>\n                              <select className=\"form-select\">\n                    {[...Array(item.countInStock).keys()].map(x => (\n                        <option key = {x + 1} value = {x + 1}> {x + 1}</option>\n                    ))}\n</select>\n\n</form>\n                                    </div>\n                                    <div className=\"col-2\">\n                  <button className=\"btn btn-light\" onClick = {() => {\n                      removeFromCartHandler(item.product)\n                  }}><i className=\"fas fa-trash\"></i></button>\n              </div>\n                                </div>\n                            </li>\n                        })}\n\n                 \n                  </ul>\n                )}\n              </div>\n              <div className=\"col-4\">\n              <ul className=\"list-group list-group-flush\">\n  <li className=\"list-group-item\">\n      <h5>Subtotal ({cartItems.reduce((acc, item) => acc + item.quantity, 0)}) items</h5>\n      ${cartItems.reduce((acc, item) => acc + item.quantity * item.price, 0)}\n  </li>\n <NavLink  className=\"list-group-item\" to = \"/shipping\"> \n        <button type = \"button\" className=\"btn-dark\" onClick = {checkoutHandler}> \n        Proceed To Checkout\n        </button>\n </NavLink>\n</ul>\n              </div>\n          </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}