{"ast":null,"code":"import axios from 'axios';\nimport { USER_DETAIL_REQUEST, USER_DETAIL_SUCCESS, USER_LOGIN_REQUEST, USER_LOGIN_SUCCESS, USER_LOGOUT, USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS } from '../constants/constants';\nexport const login = (email, password) => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: USER_LOGIN_REQUEST\n      });\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      const {\n        data\n      } = await axios.post('http://localhost:5000/api/users/login', {\n        email,\n        password\n      });\n      console.log(data);\n      dispatch({\n        type: USER_LOGIN_SUCCESS,\n        payload: data\n      });\n      localStorage.setItem('userInfo', JSON.stringify(data));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const logout = (email, password) => {\n  return async (dispatch, getState) => {\n    localStorage.removeItem('userInfo');\n    dispatch({\n      type: USER_LOGOUT\n    });\n  };\n};\nexport const register = (name, email, password) => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: USER_REGISTER_REQUEST\n      });\n      const {\n        data\n      } = await axios.post('http://localhost:5000/api/users/register', {\n        name,\n        email,\n        password\n      });\n      console.log(data);\n      dispatch({\n        type: USER_REGISTER_SUCCESS,\n        payload: data\n      });\n      dispatch({\n        type: USER_LOGIN_SUCCESS,\n        payload: data\n      });\n      localStorage.setItem('userInfo', JSON.stringify(data));\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: USER_REGISTER_FAIL\n      });\n    }\n  };\n};\nexport const getUserDetails = id => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: USER_DETAIL_REQUEST\n      });\n      const {\n        data\n      } = await axios.put('http://localhost:5000/api/users/profile', {\n        id\n      });\n      console.log(data);\n      dispatch({\n        type: USER_DETAIL_SUCCESS,\n        payload: data\n      });\n      localStorage.setItem('userInfo', JSON.stringify(data));\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: USER_DETAIL_FAIL\n      });\n    }\n  };\n};","map":{"version":3,"sources":["/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/redux/actions/userAction.js"],"names":["axios","USER_DETAIL_REQUEST","USER_DETAIL_SUCCESS","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGOUT","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","login","email","password","dispatch","getState","type","config","headers","data","post","console","log","payload","localStorage","setItem","JSON","stringify","error","logout","removeItem","register","name","getUserDetails","id","put","USER_DETAIL_FAIL"],"mappings":"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","sourcesContent":["import  axios from 'axios' \nimport { USER_DETAIL_REQUEST, USER_DETAIL_SUCCESS, USER_LOGIN_REQUEST, USER_LOGIN_SUCCESS, USER_LOGOUT, USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS } from '../constants/constants'\n\n\n\nexport const login  =  (email, password) => {\n    return async (dispatch, getState) => {\n    try {\n        dispatch({type: USER_LOGIN_REQUEST})\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n        const {data} = await axios.post('http://localhost:5000/api/users/login', {email, password})\n        console.log(data);\n        \n        dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: data\n        })\n        localStorage.setItem('userInfo', JSON.stringify(data))\n\n    } catch(error) {\n       console.log(error);\n    }\n    }\n}\n\nexport const logout  =  (email, password) => {\n    return async (dispatch, getState) => {\n  localStorage.removeItem('userInfo')\n  dispatch({type: USER_LOGOUT})\n    }\n}\n\nexport const register  =  (name, email, password) => {\n    return async (dispatch, getState) => {\n    try {\n        dispatch({type: USER_REGISTER_REQUEST})\n       \n        const {data} = await axios.post('http://localhost:5000/api/users/register', {name, email, password})\n        console.log(data);\n        \n        dispatch({\n            type: USER_REGISTER_SUCCESS,\n            payload: data\n        })\n        dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: data\n        })\n        localStorage.setItem('userInfo', JSON.stringify(data))\n\n    } catch(error) {\n       console.log(error);\n       dispatch({\n           type: USER_REGISTER_FAIL\n       })\n    }\n    }\n}\n\n\nexport const getUserDetails  =  (id) => {\n    return async (dispatch, getState) => {\n    try {\n        dispatch({type: USER_DETAIL_REQUEST})\n       \n        const {data} = await axios.put('http://localhost:5000/api/users/profile', {id})\n        console.log(data);\n        \n        dispatch({\n            type: USER_DETAIL_SUCCESS,\n            payload: data\n        })\n        \n        localStorage.setItem('userInfo', JSON.stringify(data))\n\n    } catch(error) {\n       console.log(error);\n       dispatch({\n           type: USER_DETAIL_FAIL\n       })\n    }\n    }\n}\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}