{"ast":null,"code":"var _jsxFileName = \"/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/screens/OrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { createOrder, getOrderDetail, payOrder } from '../redux/actions/orderAction';\nimport { history } from '../utils/history/history';\nimport axios from 'axios';\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function OrderScreen(_ref) {\n  _s();\n\n  var _order$user, _order$user2, _order$user3;\n\n  let {\n    match\n  } = _ref;\n  const dispatch = useDispatch();\n  const orderId = match.params.id;\n  const orderDetail = useSelector(state => state.orderDetail);\n  const [sdkReady, setSdkReady] = useState(false);\n  const {\n    order,\n    loading\n  } = orderDetail;\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    success: successPay\n  } = orderPay;\n  useEffect(() => {\n    const addPayPalScript = async () => {\n      const {\n        data: clientId\n      } = await axios.get('http://localhost:5000/api/config/paypal');\n      console.log(clientId);\n      const script = document.createElement('script');\n      script.type = \"text/javascript\";\n      script.async = true;\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (!order || successPay) {\n      dispatch(getOrderDetail(orderId));\n    } else if (!order.isPaid) {\n      if (!window.paypal) {\n        addPayPalScript();\n      } else {\n        setSdkReady(true);\n      }\n    }\n  }, [dispatch, orderId, successPay, order]);\n\n  const successPaymentHandler = paymentResult => {\n    console.log(paymentResult);\n    dispatch(payOrder(orderId, paymentResult));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CheckoutSteps, {\n      step1: true,\n      step2: true,\n      step3: true,\n      step4: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), \"OrderScreen\", /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Order \", order === null || order === void 0 ? void 0 : order._id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-8\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"list-group-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Shipping\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Name : \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 27\n              }, this), \" \", order === null || order === void 0 ? void 0 : (_order$user = order.user) === null || _order$user === void 0 ? void 0 : _order$user.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Email: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 27\n              }, this), \" \", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `mailto: ${order === null || order === void 0 ? void 0 : (_order$user2 = order.user) === null || _order$user2 === void 0 ? void 0 : _order$user2.email}`,\n                children: order === null || order === void 0 ? void 0 : (_order$user3 = order.user) === null || _order$user3 === void 0 ? void 0 : _order$user3.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 17\n              }, this), order === null || order === void 0 ? void 0 : order.shippingAddress.address, \", \", order === null || order === void 0 ? void 0 : order.shippingAddress.city, ' ', order === null || order === void 0 ? void 0 : order.shippingAddress.postalCode, \",\", ' ', order === null || order === void 0 ? void 0 : order.shippingAddress.country]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 23\n            }, this), order !== null && order !== void 0 && order.isDelivered ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-danger\",\n              children: [\"Delivered on \", order === null || order === void 0 ? void 0 : order.deliveredAt]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-danger\",\n              children: \"Not Delivered\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"list-group-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Payment Method\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Method: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this), order === null || order === void 0 ? void 0 : order.paymentMethod]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), order !== null && order !== void 0 && order.isPaid ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-danger\",\n              children: [\"Paid on \", order.paidAt]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-danger\",\n              children: \"Not Paid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"list-group-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Order Items\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 19\n            }, this), (order === null || order === void 0 ? void 0 : order.orderItems.length) === 0 ? /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Order is empty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-group\",\n              children: order === null || order === void 0 ? void 0 : order.orderItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"list-group-item\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col\",\n                    children: /*#__PURE__*/_jsxDEV(\"image\", {\n                      src: item === null || item === void 0 ? void 0 : item.image,\n                      alt: item === null || item === void 0 ? void 0 : item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 107,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col\",\n                    children: /*#__PURE__*/_jsxDEV(NavLink, {\n                      to: `/product/${item === null || item === void 0 ? void 0 : item.product}`,\n                      children: item === null || item === void 0 ? void 0 : item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: [item === null || item === void 0 ? void 0 : item.quantity, \" x $\", item === null || item === void 0 ? void 0 : item.price, \" = $\", (item === null || item === void 0 ? void 0 : item.quantity) * (item === null || item === void 0 ? void 0 : item.price)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 23\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Order Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: \"Items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: [\"$\", order === null || order === void 0 ? void 0 : order.itemsPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: \"Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: [\"$\", order === null || order === void 0 ? void 0 : order.shippingPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: \"Tax\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: [\"$\", order === null || order === void 0 ? void 0 : order.taxPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: [\"$\", order === null || order === void 0 ? void 0 : order.totalPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), !(order !== null && order !== void 0 && order.isPaid) && /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [loadingPay && /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"Loading ...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 38\n              }, this), loadingPay ? /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"Loading ...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(PayPalButton, {\n                amount: order === null || order === void 0 ? void 0 : order.totalPrice,\n                onSuccess: successPaymentHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 10\n  }, this);\n}\n\n_s(OrderScreen, \"oRcvUyzdi7i8KqWhivurMns4zE4=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = OrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderScreen\");","map":{"version":3,"sources":["/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/screens/OrderScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","NavLink","CheckoutSteps","createOrder","getOrderDetail","payOrder","history","axios","PayPalButton","OrderScreen","match","dispatch","orderId","params","id","orderDetail","state","sdkReady","setSdkReady","order","loading","orderPay","loadingPay","success","successPay","addPayPalScript","data","clientId","get","console","log","script","document","createElement","type","async","src","onload","body","appendChild","isPaid","window","paypal","successPaymentHandler","paymentResult","_id","user","name","email","shippingAddress","address","city","postalCode","country","isDelivered","deliveredAt","paymentMethod","paidAt","orderItems","length","map","item","index","image","product","quantity","price","itemsPrice","shippingPrice","taxPrice","totalPrice"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { createOrder, getOrderDetail, payOrder } from '../redux/actions/orderAction';\nimport { history } from '../utils/history/history';\nimport axios from 'axios'; \nimport { PayPalButton } from \"react-paypal-button-v2\";\n\nexport default function OrderScreen({match}) {\n    \n    const dispatch = useDispatch()\n    const orderId = match.params.id\n    const orderDetail = useSelector(state => state.orderDetail)\n    const [sdkReady, setSdkReady] = useState(false);\n    const {order, loading } = orderDetail;\n\n    const orderPay = useSelector(state => state.orderPay)\n    const {loading:loadingPay, success:successPay } = orderPay;\n\n    \n    useEffect(() => {\n        const addPayPalScript = async () => {\n            const {data: clientId} = await axios.get('http://localhost:5000/api/config/paypal')\n            console.log(clientId);\n            const script = document.createElement('script')\n            script.type = \"text/javascript\"\n            script.async = true \n            script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`\n            script.onload = () => {\n                setSdkReady(true)\n            }\n            document.body.appendChild(script)\n        }\n        if(!order || successPay) {\n            dispatch(getOrderDetail(orderId))\n        } else if(!order.isPaid) {\n            if(!window.paypal){\n                addPayPalScript()\n            } else {\n                setSdkReady(true)\n            }\n        }\n      \n    }, [dispatch, orderId, successPay, order]);\n\n    const successPaymentHandler = (paymentResult) => {\n        console.log(paymentResult);\n        dispatch(payOrder(orderId,paymentResult ))\n    }\n\n  return <div>\n      <CheckoutSteps step1 step2 step3 step4/>\n      OrderScreen\n      <h1>Order {order?._id}</h1>\n      <div className=\"row\">\n          <div className=\"col-8\">\n              <ul className=\"list-group\">\n                  <li className=\"list-group-item\">\n                      <h4>Shipping</h4>\n                      <p>\n                          <strong>Name : </strong> {order?.user?.name}\n                      </p>\n                      <p> \n                          <strong>Email: </strong> {' '} \n                        <a href={`mailto: ${order?.user?.email}`}>{order?.user?.email}</a>\n                      </p>\n                      <p>\n                <strong>Address:</strong>\n                {order?.shippingAddress.address}, {order?.shippingAddress.city}{' '}\n                {order?.shippingAddress.postalCode},{' '}\n                {order?.shippingAddress.country}\n              </p>\n              {order?.isDelivered ? (\n                <div  className = \"text-danger\">\n                  Delivered on {order?.deliveredAt}\n                </div>\n              ) : (\n                <div className = \"text-danger\">Not Delivered</div>\n              )}\n\n\n                  </li>\n                  <li className=\"list-group-item\">\n                  <h4>Payment Method</h4>\n              <p>\n                <strong>Method: </strong>\n                {order?.paymentMethod}\n              </p> \n              {order?.isPaid ? (\n                <div className = \"text-danger\">Paid on {order.paidAt}</div>\n              ) : (\n                <div className = \"text-danger\">Not Paid</div>\n              )}\n\n                  </li>\n                  <li className=\"list-group-item\">\n                  <h4>Order Items</h4>\n                  {order?.orderItems.length === 0 ? (\n                <h2>Order is empty</h2>\n              ) : (\n                <ul className=\"list-group\">\n                  {order?.orderItems.map((item, index) => (\n                    <li className=\"list-group-item\" key={index}>\n                      <div className=\"row\">\n                        <div className=\"col\">\n                          <image\n                            src=  {item?.image}\n                            alt={item?.name}\n                          />\n                        </div>\n                        <div className=\"col\">\n                          <NavLink to={`/product/${item?.product}`}>\n                            {item?.name}\n                          </NavLink>\n                        </div>\n                        <div className=\"col-4\">\n                          {item?.quantity} x ${item?.price} = ${item?.quantity * item?.price}\n                        </div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n                  </li>\n              </ul>\n          </div>\n          <div className=\"col-4\">\n          <div className= \"card\">\n            <ul>\n              <li>\n                <h2>Order Summary</h2>\n              </li>\n              <li>\n                <div className = \"row\">\n                  <div className = \"col\">Items</div>\n                  <div className = \"col\">${order?.itemsPrice}</div>\n                </div>\n              </li>\n              <li>\n                <div className = \"row\">\n                  <div className = \"col\">Shipping</div>\n                  <div className = \"col\">${order?.shippingPrice}</div>\n                </div>\n              </li>\n              <li>\n                <div className = \"row\">\n                  <div className = \"col\">Tax</div>\n                  <div className = \"col\">${order?.taxPrice}</div>\n                </div>\n              </li>\n              <li>\n                <div className = \"row\">\n                  <div className = \"col\">Total</div>\n                  <div className = \"col\">${order?.totalPrice}</div>\n                </div>\n              </li>\n              {!order?.isPaid && (\n                  <li>\n                      {loadingPay && <h1>Loading ...</h1>}\n                      {loadingPay ? <h1>Loading ...</h1> : (\n                          <PayPalButton amount={order?.totalPrice} onSuccess={successPaymentHandler}/>\n                      ) }\n                  </li>\n              )}\n            </ul>\n          </div>\n        </div>\n\n      </div>\n  </div>;\n}\n"]},"metadata":{},"sourceType":"module"}