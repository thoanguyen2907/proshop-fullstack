{"ast":null,"code":"import _slicedToArray from\"/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Redirect}from'react-router-dom';import{listMyOrders}from'../redux/actions/orderAction';import{NavLink}from'react-router-dom';import{getUserDetails,login,register,updateUserProfileFrontEnd}from'../redux/actions/userAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfileScreen(_ref){var location=_ref.location,history=_ref.history;var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];// const {userInfo} = useSelector(state => state.userLogin)\nvar userInfo=JSON.parse(localStorage.getItem('userInfo'));var _useSelector=useSelector(function(state){return state.userUpdateProfile;}),success=_useSelector.success;var _useSelector2=useSelector(function(state){return state.orderListMy;}),orders=_useSelector2.orders;var submitHandler=function submitHandler(e){e.preventDefault();// if(password !== confirmPassword) {\n//     setMessage('Password do not match')\n//     return;\n// }\ndispatch(updateUserProfileFrontEnd({id:userInfo._id,name:name,email:email,password:password}));};useEffect(function(){if(!userInfo){history.push('/login');}else{setEmail(userInfo.email);setName(userInfo.name);dispatch(listMyOrders());}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Your Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"name\",onChange:function onChange(e){return setName(e.target.value);},value:name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",onChange:function onChange(e){return setEmail(e.target.value);},value:email}),/*#__PURE__*/_jsx(\"div\",{className:\"form-text\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"confirmPassword\",onChange:function onChange(e){return setConfirmPassword(e.target.value);},value:confirmPassword}),/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:message})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-9\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Orders \"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders===null||orders===void 0?void 0:orders.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item._id}),/*#__PURE__*/_jsx(\"td\",{children:item.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:item.totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:item.isPaid?item.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:item.isDelivered?item.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/order/\".concat(item._id),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light\",children:\"Details\"})})})]},index);})})]})]})]})]});}","map":{"version":3,"sources":["/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/screens/ProfileScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Redirect","listMyOrders","NavLink","getUserDetails","login","register","updateUserProfileFrontEnd","ProfileScreen","location","history","dispatch","email","setEmail","password","setPassword","name","setName","confirmPassword","setConfirmPassword","message","setMessage","userInfo","JSON","parse","localStorage","getItem","state","userUpdateProfile","success","orderListMy","orders","submitHandler","e","preventDefault","id","_id","push","target","value","map","item","index","createdAt","substring","totalPrice","isPaid","paidAt","color","isDelivered","deliveredAt"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {useDispatch, useSelector} from 'react-redux'\nimport { Redirect } from 'react-router-dom';\nimport { listMyOrders } from '../redux/actions/orderAction';\nimport { NavLink } from 'react-router-dom';\nimport {getUserDetails, login, register, updateUserProfileFrontEnd} from '../redux/actions/userAction'\nexport default function ProfileScreen({location, history}) {\n    const dispatch = useDispatch()\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [name, setName] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [message, setMessage] = useState('');\n    // const {userInfo} = useSelector(state => state.userLogin)\n    const userInfo = JSON.parse( localStorage.getItem('userInfo'))\n    const {success} = useSelector(state => state.userUpdateProfile)\n    const {orders} = useSelector(state => state.orderListMy)\n\n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        // if(password !== confirmPassword) {\n        //     setMessage('Password do not match')\n        //     return;\n        // }\n\n        dispatch(updateUserProfileFrontEnd({id: userInfo._id, name, email, password}))\n    }\n\n    useEffect(() => {\n        if (!userInfo) {\n            history.push('/login')\n          } else {\n            setEmail(userInfo.email)\n            setName(userInfo.name)\n            dispatch(listMyOrders())\n          }\n\n               \n    }, []);\n\n \n\n \n    return (\n        <div className='container'>\n            <h3>Update Profile</h3>\n     \n        <div className=\"row\">\n          <div className=\"col-3\">\n          <form onSubmit = {submitHandler}>\n\n<div className=\"mb-3\">\n<label className=\"form-label\">Your Name</label>\n<input type=\"text\" className=\"form-control\" name = \"name\" onChange={(e) => setName(e.target.value)\n}  value = {name}/>\n\n</div>\n\n<div className=\"mb-3\">\n<label className=\"form-label\">Email address</label>\n<input type=\"email\" className=\"form-control\" name = \"email\" onChange={(e) => setEmail(e.target.value)}  value = {email}/>\n<div className=\"form-text\">We'll never share your email with anyone else.</div>\n</div>\n<div className=\"mb-3\">\n<label className=\"form-label\">Password</label>\n<input type=\"password\" className=\"form-control\" name = \"password\" onChange={(e) => setPassword(e.target.value)} value = {password} />\n</div>\n\n<div className=\"mb-3\">\n<label className=\"form-label\">Confirm Password</label>\n<input type=\"password\" className=\"form-control\" name = \"confirmPassword\" onChange={(e) => setConfirmPassword(e.target.value)} value = {confirmPassword} />\n<div className=\"text-danger\">{message}</div>\n</div>\n\n<button type=\"submit\" className=\"btn btn-primary\">Update</button>\n</form>\n          </div>\n          <div className=\"col-9\">\n              <h3>My Orders </h3>\n              <table className=\"table\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\">ID</th>\n                    <th scope=\"col\">DATE</th>\n                    <th scope=\"col\">TOTAL</th>\n                    <th scope=\"col\">PAID</th>\n                    <th scope=\"col\">DELIVERED</th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody>\n                {orders?.map((item, index) => {\n                    return  <tr key = {index}>\n                      <td>{item._id}</td>\n                  <td>{item.createdAt.substring(0, 10)}</td>\n                  <td>{item.totalPrice}</td>\n                  <td>\n                    {item.isPaid ? (\n                      item.paidAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}\n                  </td>\n                  <td>\n                    {item.isDelivered ? (\n                      item.deliveredAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}\n                  </td>\n                  <td>\n                    <NavLink to={`/order/${item._id}`}>\n                      <button className='btn btn-light'>\n                        Details\n                      </button>\n                    </NavLink>\n                  </td>\n                    </tr>\n                   \n                    })}\n                 \n                </tbody>\n              </table>\n          </div>\n        </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}