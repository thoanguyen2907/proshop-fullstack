{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{NavLink}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../redux/actions/orderAction';import{history}from'../utils/history/history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlaceOrderScreen(){var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,success=orderCreate.success;useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));}},[success,order]);var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,totalPrice:cart.totalPrice,taxPrice:cart.taxPrice}));};//calculate price\ncart.itemsPrice=Number(cart.cartItems.reduce(function(acc,item){return acc+item.price*item.quantity;},0)).toFixed(2);cart.shippingPrice=cart.cartItems>100?0:100;cart.taxPrice=Number((0.15*cart.itemsPrice).toFixed(2));cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice)).toFixed(2);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-8\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group flush\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),cart.shippingAddress.address,\",    \",cart.shippingAddress.city,\",\",cart.shippingAddress.postalCode,\",  \",cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Method: \"}),cart.paymentMethod]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Orders\"}),cart.cartItems.length===0?'Your cart is empty':/*#__PURE__*/_jsx(\"ul\",{className:\"list-group flush\",children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,style:{width:'40px',height:'40px'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsxs(NavLink,{to:\"/product/\".concat(item.product),className:\"text-dark text-decoration-none\",children:[item.name,\"  \"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-4\",children:[item.quantity,\" x $\",Number(item.price).toFixed(2),\" = $\",Number(item.quantity*item.price).toFixed(2)]})]})})})},index);})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group flush\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",cart.itemsPrice]})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",cart.shippingPrice]})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",cart.taxPrice]})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[\"$\",cart.totalPrice]})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary btn-lg\",disabled:cart.cartItems.length===0,onClick:placeOrderHandler,children:\" Place Order \"})})]})})})]})]});}","map":{"version":3,"sources":["/Users/thoanguyen/Library/Mobile Documents/com~apple~CloudDocs/fullstack/proshop/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","NavLink","CheckoutSteps","createOrder","history","PlaceOrderScreen","dispatch","cart","state","orderCreate","order","success","push","_id","placeOrderHandler","orderItems","cartItems","shippingAddress","paymentMethod","itemsPrice","shippingPrice","totalPrice","taxPrice","Number","reduce","acc","item","price","quantity","toFixed","address","city","postalCode","country","length","map","index","image","name","width","height","product"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { createOrder } from '../redux/actions/orderAction';\nimport { history } from '../utils/history/history';\n\nexport default function PlaceOrderScreen() {\n    \n    const dispatch = useDispatch()\n    const cart = useSelector(state => state.cart)\n    const orderCreate = useSelector(state => state.orderCreate)\n    const {order, success} = orderCreate;\n    \n    useEffect(() => {\n        if(success) {\n            history.push(`/order/${order._id}`)\n        }\n    }, [success, order]);\n\n\n    const placeOrderHandler = () => {\n        dispatch(createOrder({\n            orderItems: cart.cartItems,\n            shippingAddress: cart.shippingAddress,\n            paymentMethod: cart.paymentMethod,\n            itemsPrice:  cart.itemsPrice,\n            shippingPrice:  cart.shippingPrice,\n            totalPrice   : cart.totalPrice,\n            taxPrice:   cart.taxPrice\n        }))\n    }\n    //calculate price\n    cart.itemsPrice = Number(cart.cartItems.reduce((acc, item) => acc + item.price * item.quantity, 0)).toFixed(2)\n\n    cart.shippingPrice = cart.cartItems > 100 ? 0 : 100\n\n    cart.taxPrice = Number((0.15 * cart.itemsPrice).toFixed(2)) \n\n    cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice)).toFixed(2)\n\n  return <div>\n      <CheckoutSteps step1 step2 step3 step4/>\n      <div className=\"row\">\n          <div className=\"col-8\">\n              <ul className=\"list-group flush\">\n                  <li className=\"list-group-item\">\n                      <h4>Shipping</h4>\n                      <p> <strong>Address: </strong> \n                        {cart.shippingAddress.address},    {cart.shippingAddress.city},\n                        {cart.shippingAddress.postalCode},  {cart.shippingAddress.country}\n                       </p>\n                  </li>\n                  <li className=\"list-group-item\">\n                    <h4>Payment Method</h4>\n                    <strong>Method: </strong>\n                    {cart.paymentMethod}\n                  </li>\n                  <li className=\"list-group-item\">\n                    <h4>Orders</h4>\n                    {cart.cartItems.length === 0 ? 'Your cart is empty' : (\n                        <ul className=\"list-group flush\">\n                            {cart.cartItems.map((item, index) => {\n                                return  <li className=\"list-group-item\" key = {index}>\n                                    <div className=\"row\">\n                                        <div className=\"col-10\">\n                                            <div className=\"row\">\n                                            <div className=\"col-1\">\n                                            <img src={item.image} alt={item.name}  style = {{width: '40px', height: '40px'}}/>\n                                        </div>\n                                        <div className=\"col-4\">\n                                        <p> <NavLink to = {`/product/${item.product}`} className='text-dark text-decoration-none'> \n                                           {item.name}  </NavLink></p>\n                                        </div>\n                                        <div className=\"col-4\">\n                                            {item.quantity} x ${Number(item.price).toFixed(2)} = ${Number(item.quantity * item.price).toFixed(2)}\n                                        </div>\n                                            </div>\n                                        </div>\n                                     \n                                       \n                                    </div>\n                                   </li>\n                            })}\n                     \n                        </ul>\n                    )}\n                  </li>\n            \n              </ul>\n          </div>\n          <div className=\"col-4\">\n                                            <div className=\"card\">\n                                                <ul className=\"list-group flush\">\n                                                    <li className=\"list-group-item\">\n                                                        <h4>Order Summary</h4>\n                                                    </li>\n                                                    <li className=\"list-group-item\">\n                                                        <div className=\"row\">\n                                                            <div className=\"col\">Items</div>\n                                                            <div className=\"col\">${cart.itemsPrice}</div>\n                                                        </div>\n                                                    </li>\n                                                    <li className=\"list-group-item\">\n                                                        <div className=\"row\">\n                                                            <div className=\"col\">Shipping</div>\n                                                            <div className=\"col\">${cart.shippingPrice}</div>\n                                                        </div>\n                                                    </li>\n                                                    <li className=\"list-group-item\">\n                                                        <div className=\"row\">\n                                                            <div className=\"col\">Tax</div>\n                                                            <div className=\"col\">${cart.taxPrice}</div>\n                                                        </div>\n                                                    </li>\n                                                    <li className=\"list-group-item\">\n                                                        <div className=\"row\">\n                                                            <div className=\"col\">Total</div>\n                                                            <div className=\"col\">${cart.totalPrice}</div>\n                                                        </div>\n                                                    </li>\n\n                                                    <li className=\"list-group-item\">\n                                                       <button type=\"button\" className='btn btn-secondary btn-lg' disabled={cart.cartItems.length === 0} onClick={placeOrderHandler}> Place Order </button>\n                                                    </li>\n\n                                                </ul>\n                                            </div>\n                                        </div>\n      </div>\n  </div>;\n}\n"]},"metadata":{},"sourceType":"module"}